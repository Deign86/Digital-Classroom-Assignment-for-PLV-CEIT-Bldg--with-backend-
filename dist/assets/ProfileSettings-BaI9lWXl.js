import{j as s,S as ss,m as es,r as c,L as R,k as V,l as W}from"./radix-vendor-Btpt_kqv.js";import{c as l,L as u,I as b,B as as,A as rs,p as ts,q as os,r as ns,s as is,t as ls,u as ds,v as cs,H as ms}from"./index-BQwrV1tT.js";import{P as E}from"./phosphor-icons-rxxn67t3.js";import{W as q,c as H,g as us,w as N,S as ws,x as xs,U as L,M as hs,y as C,B as gs,L as f,E as S,z as k,d as A}from"./lucide-react-DfPWT9_p.js";import{a as _}from"./utils-vendor-Cr9tsIwC.js";import{t as p}from"./analytics-sonner-DyzmvkVy.js";function M({className:a,...e}){return s.jsx("div",{"data-slot":"card",className:l("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...e})}function U({className:a,...e}){return s.jsx("div",{"data-slot":"card-header",className:l("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...e})}function $({className:a,...e}){return s.jsx("h4",{"data-slot":"card-title",className:l("leading-none",a),...e})}function B({className:a,...e}){return s.jsx("div",{"data-slot":"card-description",className:l("text-muted-foreground",a),...e})}function I({className:a,...e}){return s.jsx("div",{"data-slot":"card-content",className:l("px-6 [&:last-child]:pb-6",a),...e})}const fs=_("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ps({className:a,variant:e,asChild:o=!1,...n}){const m=o?ss:"span";return s.jsx(m,{"data-slot":"badge",className:l(fs({variant:e}),a),...n})}const zs=es,js=c.forwardRef(({className:a,...e},o)=>s.jsx(R,{ref:o,className:l("bg-gray-100 text-gray-600 relative inline-flex h-10 w-full items-center justify-center rounded-xl p-1",a),...e}));js.displayName=R.displayName;const vs=c.forwardRef(({className:a,...e},o)=>s.jsx(V,{ref:o,className:l("relative z-10 inline-flex items-center justify-center whitespace-nowrap rounded-lg px-3 py-1.5 text-sm font-medium ring-offset-background transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-900 data-[state=active]:shadow-sm hover:text-gray-900",a),...e}));vs.displayName=V.displayName;const ys=c.forwardRef(({className:a,...e},o)=>s.jsx(W,{ref:o,className:l("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...e}));ys.displayName=W.displayName;const d=(a,e={})=>{for(const o of a){const n=E[o]??E[`${o}Icon`];if(n)return s.jsx(n,{...e})}return null},w={Projector:d(["ProjectorScreenChart","Projector","ProjectorScreen"],{className:"h-4 w-4"})||s.jsx(xs,{className:"h-4 w-4"}),Computer:d(["Monitor","Desktop"],{className:"h-4 w-4"})||s.jsx(N,{className:"h-4 w-4"}),Computers:d(["Monitor","Desktop"],{className:"h-4 w-4"})||s.jsx(N,{className:"h-4 w-4"}),WiFi:d(["Wifi","WifiSimple"],{className:"h-4 w-4"})||s.jsx(q,{className:"h-4 w-4"}),Whiteboard:d(["Chalkboard","ChalkboardSimple"],{className:"h-4 w-4"})||s.jsx(ws,{className:"h-4 w-4"}),TV:d(["Television","Tv","MonitorPlay"],{className:"h-4 w-4"})||s.jsx(N,{className:"h-4 w-4"}),Podium:d(["Podium","Presentation","Microphone"],{className:"h-4 w-4"})||s.jsx(us,{className:"h-4 w-4"}),Speakers:d(["SpeakerHigh","SpeakerSimple"],{className:"h-4 w-4"})||null,Speaker:d(["SpeakerHigh","SpeakerSimple"],{className:"h-4 w-4"})||null,"Air Conditioner":d(["Fan","FanSimple","Snowflake"],{className:"h-4 w-4"})||null,AC:d(["Fan","FanSimple","Snowflake"],{className:"h-4 w-4"})||null},h=a=>a.replace(/[^a-z0-9]/gi,"").toLowerCase(),Es=a=>{if(!a)return null;const e=Object.keys(w).find(m=>h(m)===h(a));if(e&&w[e])return w[e];const o=a.endsWith("s")?a.slice(0,-1):`${a}s`,n=Object.keys(w).find(m=>h(m)===h(o));return n&&w[n]?w[n]:h(a).includes("wifi")?s.jsx(q,{className:"h-4 w-4"}):s.jsx(H,{className:"h-4 w-4 text-gray-500"})};function Ls({className:a,...e}){return s.jsx("textarea",{"data-slot":"textarea",className:l("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...e})}const Ps=_("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function bs({className:a,variant:e,...o}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:l(Ps({variant:e}),a),...o})}function Ns({className:a,...e}){return s.jsx("div",{"data-slot":"alert-description",className:l("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...e})}function Ms({user:a}){const[e,o]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,m]=c.useState(!1),[j,O]=c.useState(!1),[v,Y]=c.useState(!1),[D,F]=c.useState(!1),[K,y]=c.useState(!1),[i,x]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),Z=()=>{const t={currentPassword:"",newPassword:"",confirmPassword:""};let r=!0;if(e.currentPassword||(t.currentPassword="Current password is required",r=!1),!e.newPassword)t.newPassword="New password is required",r=!1;else if(e.newPassword.length<8)t.newPassword="Password must be at least 8 characters long",r=!1;else{const P=/[A-Z]/.test(e.newPassword),g=/[a-z]/.test(e.newPassword),Q=/[0-9]/.test(e.newPassword),X=/[!@#$%^&*(),.?":{}|<>]/.test(e.newPassword);!P||!g||!Q||!X?(t.newPassword="Password must contain uppercase, lowercase, number, and special character",r=!1):e.newPassword===e.currentPassword&&(t.newPassword="New password cannot be the same as the current password",r=!1)}return e.confirmPassword?e.newPassword!==e.confirmPassword&&(t.confirmPassword="Passwords do not match",r=!1):(t.confirmPassword="Please confirm your password",r=!1),x(t),r},T=t=>{if(!t)return t;let r=t.replace(/[\r\n\t]/g,"");return r=r.replace(/[\u200B\u200C\u200D\uFEFF]/g,""),r=r.trim(),r},G=t=>{t.preventDefault(),x({currentPassword:"",newPassword:"",confirmPassword:""});const r=T(e.newPassword),P=T(e.confirmPassword);o(g=>({...g,newPassword:r,confirmPassword:P})),setTimeout(()=>{Z()&&y(!0)},0)},J=async()=>{y(!1),F(!0),p.info("Updating password...",{description:"Please wait while we securely update your password.",duration:2e3});try{const t=await ms.updatePassword(e.currentPassword,e.newPassword);t.success?(p.success("Password Changed Successfully!",{description:"For security, you will now be logged out. Please log back in with your new password.",duration:3e3}),o({currentPassword:"",newPassword:"",confirmPassword:""})):p.error("Failed to update password",{description:t.message})}catch(t){console.error("Password update error:",t);const r=t instanceof Error?t.message:"An error occurred while updating password";p.error("Failed to update password",{description:r})}finally{F(!1)}},z=(t=>{if(t.length===0)return{strength:"",color:""};let r=0;return t.length>=8&&r++,t.length>=12&&r++,/[A-Z]/.test(t)&&r++,/[a-z]/.test(t)&&r++,/[0-9]/.test(t)&&r++,/[!@#$%^&*(),.?":{}|<>]/.test(t)&&r++,r<=2?{strength:"Weak",color:"text-red-600"}:r<=4?{strength:"Fair",color:"text-yellow-600"}:r<=5?{strength:"Good",color:"text-blue-600"}:{strength:"Strong",color:"text-green-600"}})(e.newPassword);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsxs($,{className:"flex items-center gap-2",children:[s.jsx(L,{className:"h-5 w-5"}),"Profile Information"]}),s.jsx(B,{children:"Your account details and role information"})]}),s.jsx(I,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-sm font-medium text-gray-600",children:"Full Name"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(L,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:a.name})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-sm font-medium text-gray-600",children:"Email Address"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(hs,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:a.email})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-sm font-medium text-gray-600",children:"Role"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(C,{className:"h-4 w-4 text-gray-500"}),s.jsx(ps,{variant:a.role==="admin"?"default":"secondary",children:a.role==="admin"?"Administrator":"Faculty"})]})]}),a.department&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{className:"text-sm font-medium text-gray-600",children:"Department"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(gs,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:a.department})]})]})]})})]}),s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsxs($,{className:"flex items-center gap-2",children:[s.jsx(f,{className:"h-5 w-5"}),"Change Password"]}),s.jsx(B,{children:"Update your password to keep your account secure"})]}),s.jsxs(I,{children:[s.jsxs("form",{onSubmit:G,className:"space-y-6",children:[s.jsxs(bs,{children:[s.jsx(C,{className:"h-4 w-4"}),s.jsxs(Ns,{children:[s.jsx("strong",{children:"Security Notice:"})," For your protection, changing your password will sign you out of all active sessions on all devices. You will need to sign back in with your new password."]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Password Requirements:"}),s.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside space-y-1",children:[s.jsx("li",{children:"At least 8 characters long"}),s.jsx("li",{children:"Contains uppercase and lowercase letters"}),s.jsx("li",{children:"Contains at least one number"}),s.jsx("li",{children:"Contains at least one special character (e.g., !@#$%^&*)"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"current-password",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(b,{id:"current-password",type:n?"text":"password",placeholder:"Enter your current password",value:e.currentPassword,onChange:t=>{o(r=>({...r,currentPassword:t.target.value})),i.currentPassword&&x(r=>({...r,currentPassword:""}))},className:`pl-10 pr-10 ${i.currentPassword?"border-red-500 focus-visible:ring-red-500":""}`,required:!0}),s.jsx("button",{type:"button",onClick:()=>m(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?s.jsx(S,{className:"h-4 w-4"}):s.jsx(k,{className:"h-4 w-4"})})]}),i.currentPassword&&s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(A,{className:"h-3 w-3"}),i.currentPassword]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"new-password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(b,{id:"new-password",type:j?"text":"password",placeholder:"Enter new password",value:e.newPassword,onChange:t=>{o(r=>({...r,newPassword:t.target.value})),i.newPassword&&x(r=>({...r,newPassword:""}))},className:`pl-10 pr-10 ${i.newPassword?"border-red-500 focus-visible:ring-red-500":""}`,required:!0}),s.jsx("button",{type:"button",onClick:()=>O(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:j?s.jsx(S,{className:"h-4 w-4"}):s.jsx(k,{className:"h-4 w-4"})})]}),i.newPassword?s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(A,{className:"h-3 w-3"}),i.newPassword]}):e.newPassword&&s.jsxs("p",{className:`text-sm font-medium ${z.color}`,children:["Strength: ",z.strength]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(b,{id:"confirm-password",type:v?"text":"password",placeholder:"Confirm new password",value:e.confirmPassword,onChange:t=>{o(r=>({...r,confirmPassword:t.target.value})),i.confirmPassword&&x(r=>({...r,confirmPassword:""}))},className:`pl-10 pr-10 ${i.confirmPassword?"border-red-500 focus-visible:ring-red-500":""}`,required:!0}),s.jsx("button",{type:"button",onClick:()=>Y(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v?s.jsx(S,{className:"h-4 w-4"}):s.jsx(k,{className:"h-4 w-4"})})]}),i.confirmPassword?s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(A,{className:"h-3 w-3"}),i.confirmPassword]}):e.confirmPassword&&e.newPassword===e.confirmPassword&&s.jsxs("p",{className:"text-sm font-medium text-green-600 flex items-center gap-1",children:[s.jsx(H,{className:"h-3 w-3"}),"Passwords match"]})]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx(as,{type:"submit",disabled:D||!e.currentPassword||!e.newPassword||!e.confirmPassword,className:"flex-1",children:D?"Updating...":"Update Password"})})]}),s.jsx(rs,{open:K,onOpenChange:y,children:s.jsxs(ts,{children:[s.jsxs(os,{children:[s.jsxs(ns,{className:"flex items-center gap-2",children:[s.jsx(C,{className:"h-5 w-5 text-amber-500"}),"Confirm Password Change"]}),s.jsx(is,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("p",{children:"Are you sure you want to change your password? This action will:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[s.jsx("li",{children:"Update your account password immediately"}),s.jsx("li",{children:"Log you out from all devices and sessions"}),s.jsx("li",{children:"Require you to log back in with your new password"})]}),s.jsx("p",{className:"font-medium text-amber-600",children:"Make sure you remember your new password before proceeding."})]})})]}),s.jsxs(ls,{children:[s.jsx(ds,{children:"Cancel"}),s.jsx(cs,{onClick:J,className:"bg-blue-600 hover:bg-blue-700",children:"Yes, Change Password"})]})]})})]})]})]})}export{ps as B,M as C,Ms as P,Ls as T,U as a,$ as b,B as c,I as d,w as e,zs as f,Es as g,js as h,vs as i,ys as j};
