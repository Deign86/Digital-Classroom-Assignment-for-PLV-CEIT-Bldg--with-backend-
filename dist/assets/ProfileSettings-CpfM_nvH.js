import{j as s,S as ss,n as es,r as d,L as B,l as R,m as V}from"./radix-vendor-DJ-YvGDu.js";import{c as w,L as m,I as b,B as rs,A as as,p as ts,q as os,r as ns,s as is,t as ls,v as ds,w as cs,P as ms}from"./index-DBVIpWXM.js";import{P as ws}from"./phosphor-icons-BEaEz7fh.js";import{W,c as q,h as us,x as N,S as hs,y as ps,U as E,M as xs,z as C,B as fs,L as j,E as S,e as k,d as A}from"./lucide-react-zzbXK0ST.js";import{C as H,a as L,b as I,c as M,d as U}from"./card-BzHxhX3E.js";import{a as O}from"./utils-vendor-Cr9tsIwC.js";import{t as P}from"./analytics-sonner-BjpdSZ9P.js";const gs=O("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function js({className:t,variant:e,asChild:o=!1,...n}){const c=o?ss:"span";return s.jsx(c,{"data-slot":"badge",className:w(gs({variant:e}),t),...n})}const Hs=es,Ps=d.forwardRef(({className:t,...e},o)=>s.jsx(B,{ref:o,className:w("bg-gray-100 text-gray-600 relative inline-flex h-10 w-full items-center justify-center rounded-xl p-1",t),...e}));Ps.displayName=B.displayName;const ys=d.forwardRef(({className:t,...e},o)=>s.jsx(R,{ref:o,className:w("relative z-10 inline-flex items-center justify-center whitespace-nowrap rounded-lg px-3 py-1.5 text-sm font-medium ring-offset-background transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-900 data-[state=active]:shadow-sm hover:text-gray-900",t),...e}));ys.displayName=R.displayName;const vs=d.forwardRef(({className:t,...e},o)=>s.jsx(V,{ref:o,className:w("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));vs.displayName=V.displayName;const $=ws,l=(t,e={})=>{for(const o of t){const n=$[o]??$[`${o}Icon`];if(n)return s.jsx(n,{...e})}return null},p={Projector:l(["ProjectorScreenChart","Projector","ProjectorScreen"],{className:"h-4 w-4"})||s.jsx(ps,{className:"h-4 w-4"}),Computer:l(["Monitor","Desktop"],{className:"h-4 w-4"})||s.jsx(N,{className:"h-4 w-4"}),Computers:l(["Monitor","Desktop"],{className:"h-4 w-4"})||s.jsx(N,{className:"h-4 w-4"}),WiFi:l(["Wifi","WifiSimple"],{className:"h-4 w-4"})||s.jsx(W,{className:"h-4 w-4"}),Whiteboard:l(["Chalkboard","ChalkboardSimple"],{className:"h-4 w-4"})||s.jsx(hs,{className:"h-4 w-4"}),TV:l(["Television","Tv","MonitorPlay"],{className:"h-4 w-4"})||s.jsx(N,{className:"h-4 w-4"}),Podium:l(["Podium","Presentation","Microphone"],{className:"h-4 w-4"})||s.jsx(us,{className:"h-4 w-4"}),Speakers:l(["SpeakerHigh","SpeakerSimple"],{className:"h-4 w-4"})||null,Speaker:l(["SpeakerHigh","SpeakerSimple"],{className:"h-4 w-4"})||null,"Air Conditioner":l(["Fan","FanSimple","Snowflake"],{className:"h-4 w-4"})||null,AC:l(["Fan","FanSimple","Snowflake"],{className:"h-4 w-4"})||null},f=t=>t.replace(/[^a-z0-9]/gi,"").toLowerCase(),Ls=t=>{if(!t)return null;const e=Object.keys(p).find(c=>f(c)===f(t));if(e&&p[e])return p[e];const o=t.endsWith("s")?t.slice(0,-1):`${t}s`,n=Object.keys(p).find(c=>f(c)===f(o));return n&&p[n]?p[n]:f(t).includes("wifi")?s.jsx(W,{className:"h-4 w-4"}):s.jsx(q,{className:"h-4 w-4 text-gray-500"})};function Is({className:t,...e}){return s.jsx("textarea",{"data-slot":"textarea",className:w("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const bs=O("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ns({className:t,variant:e,...o}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:w(bs({variant:e}),t),...o})}function Cs({className:t,...e}){return s.jsx("div",{"data-slot":"alert-description",className:w("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}function Ms({user:t}){const[e,o]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,c]=d.useState(!1),[u,Y]=d.useState(!1),[h,_]=d.useState(!1),[D,F]=d.useState(!1),[K,y]=d.useState(!1),[i,x]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),Z=()=>{const a={currentPassword:"",newPassword:"",confirmPassword:""};let r=!0;if(e.currentPassword||(a.currentPassword="Current password is required",r=!1),!e.newPassword)a.newPassword="New password is required",r=!1;else if(e.newPassword.length<8)a.newPassword="Password must be at least 8 characters long",r=!1;else{const v=/[A-Z]/.test(e.newPassword),g=/[a-z]/.test(e.newPassword),Q=/[0-9]/.test(e.newPassword),X=/[!@#$%^&*(),.?":{}|<>]/.test(e.newPassword);!v||!g||!Q||!X?(a.newPassword="Password must contain uppercase, lowercase, number, and special character",r=!1):e.newPassword===e.currentPassword&&(a.newPassword="New password cannot be the same as the current password",r=!1)}return e.confirmPassword?e.newPassword!==e.confirmPassword&&(a.confirmPassword="Passwords do not match",r=!1):(a.confirmPassword="Please confirm your password",r=!1),x(a),r},T=a=>{if(!a)return a;let r=a.replace(/[\r\n\t]/g,"");return r=r.replace(/[\u200B\u200C\u200D\uFEFF]/g,""),r=r.trim(),r},G=a=>{a.preventDefault(),x({currentPassword:"",newPassword:"",confirmPassword:""});const r=T(e.newPassword),v=T(e.confirmPassword);o(g=>({...g,newPassword:r,confirmPassword:v})),setTimeout(()=>{Z()&&y(!0)},0)},J=async()=>{y(!1),F(!0),P.info("Updating password...",{description:"Please wait while we securely update your password.",duration:2e3});try{const a=await ms.updatePassword(e.currentPassword,e.newPassword);a.success?(P.success("Password Changed Successfully!",{description:"For security, you will now be logged out. Please log back in with your new password.",duration:3e3}),o({currentPassword:"",newPassword:"",confirmPassword:""})):P.error("Failed to update password",{description:a.message})}catch(a){console.error("Password update error:",a);const r=a instanceof Error?a.message:"An error occurred while updating password";P.error("Failed to update password",{description:r})}finally{F(!1)}},z=(a=>{if(a.length===0)return{strength:"",color:""};let r=0;return a.length>=8&&r++,a.length>=12&&r++,/[A-Z]/.test(a)&&r++,/[a-z]/.test(a)&&r++,/[0-9]/.test(a)&&r++,/[!@#$%^&*(),.?":{}|<>]/.test(a)&&r++,r<=2?{strength:"Weak",color:"text-red-600"}:r<=4?{strength:"Fair",color:"text-yellow-600"}:r<=5?{strength:"Good",color:"text-blue-600"}:{strength:"Strong",color:"text-green-600"}})(e.newPassword);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(H,{children:[s.jsxs(L,{children:[s.jsxs(I,{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-5 w-5"}),"Profile Information"]}),s.jsx(M,{children:"Your account details and role information"})]}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Full Name"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(E,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:t.name})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Email Address"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(xs,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:t.email})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Role"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(C,{className:"h-4 w-4 text-gray-500"}),s.jsx(js,{variant:t.role==="admin"?"default":"secondary",children:t.role==="admin"?"Administrator":"Faculty"})]})]}),t.department&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Department"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(fs,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:t.department})]})]})]})})]}),s.jsxs(H,{children:[s.jsxs(L,{children:[s.jsxs(I,{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-5 w-5"}),"Change Password"]}),s.jsx(M,{children:"Update your password to keep your account secure"})]}),s.jsxs(U,{children:[s.jsxs("form",{onSubmit:G,className:"space-y-6",children:[s.jsxs(Ns,{children:[s.jsx(C,{className:"h-4 w-4"}),s.jsxs(Cs,{children:[s.jsx("strong",{children:"Security Notice:"})," For your protection, changing your password will sign you out of all active sessions on all devices. You will need to sign back in with your new password."]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Password Requirements:"}),s.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside space-y-1",children:[s.jsx("li",{children:"At least 8 characters long"}),s.jsx("li",{children:"Contains uppercase and lowercase letters"}),s.jsx("li",{children:"Contains at least one number"}),s.jsx("li",{children:"Contains at least one special character (e.g., !@#$%^&*)"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"current-password",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(b,{id:"current-password",type:n?"text":"password",placeholder:"Enter your current password",value:e.currentPassword,onChange:a=>{o(r=>({...r,currentPassword:a.target.value})),i.currentPassword&&x(r=>({...r,currentPassword:""}))},className:`pl-10 pr-10 ${i.currentPassword?"border-red-500 focus-visible:ring-red-500":""}`,required:!0}),s.jsx("button",{type:"button",onClick:()=>c(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":n?"Hide current password":"Show current password","aria-pressed":n,title:n?"Hide current password":"Show current password",children:n?s.jsx(S,{className:"h-4 w-4"}):s.jsx(k,{className:"h-4 w-4"})})]}),i.currentPassword&&s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(A,{className:"h-3 w-3"}),i.currentPassword]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"new-password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(b,{id:"new-password",type:u?"text":"password",placeholder:"Enter new password",value:e.newPassword,onChange:a=>{o(r=>({...r,newPassword:a.target.value})),i.newPassword&&x(r=>({...r,newPassword:""}))},className:`pl-10 pr-10 ${i.newPassword?"border-red-500 focus-visible:ring-red-500":""}`,required:!0}),s.jsx("button",{type:"button",onClick:()=>Y(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":u?"Hide new password":"Show new password","aria-pressed":u,title:u?"Hide new password":"Show new password",children:u?s.jsx(S,{className:"h-4 w-4"}):s.jsx(k,{className:"h-4 w-4"})})]}),i.newPassword?s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(A,{className:"h-3 w-3"}),i.newPassword]}):e.newPassword&&s.jsxs("p",{className:`text-sm font-medium ${z.color}`,children:["Strength: ",z.strength]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(b,{id:"confirm-password",type:h?"text":"password",placeholder:"Confirm new password",value:e.confirmPassword,onChange:a=>{o(r=>({...r,confirmPassword:a.target.value})),i.confirmPassword&&x(r=>({...r,confirmPassword:""}))},className:`pl-10 pr-10 ${i.confirmPassword?"border-red-500 focus-visible:ring-red-500":""}`,required:!0}),s.jsx("button",{type:"button",onClick:()=>_(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":h?"Hide confirm password":"Show confirm password","aria-pressed":h,title:h?"Hide confirm password":"Show confirm password",children:h?s.jsx(S,{className:"h-4 w-4"}):s.jsx(k,{className:"h-4 w-4"})})]}),i.confirmPassword?s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(A,{className:"h-3 w-3"}),i.confirmPassword]}):e.confirmPassword&&e.newPassword===e.confirmPassword&&s.jsxs("p",{className:"text-sm font-medium text-green-600 flex items-center gap-1",children:[s.jsx(q,{className:"h-3 w-3"}),"Passwords match"]})]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx(rs,{type:"submit",disabled:D||!e.currentPassword||!e.newPassword||!e.confirmPassword,className:"flex-1",children:D?"Updating...":"Update Password"})})]}),s.jsx(as,{open:K,onOpenChange:y,children:s.jsxs(ts,{children:[s.jsxs(os,{children:[s.jsxs(ns,{className:"flex items-center gap-2",children:[s.jsx(C,{className:"h-5 w-5 text-amber-500"}),"Confirm Password Change"]}),s.jsx(is,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("p",{children:"Are you sure you want to change your password? This action will:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[s.jsx("li",{children:"Update your account password immediately"}),s.jsx("li",{children:"Log you out from all devices and sessions"}),s.jsx("li",{children:"Require you to log back in with your new password"})]}),s.jsx("p",{className:"font-medium text-amber-600",children:"Make sure you remember your new password before proceeding."})]})})]}),s.jsxs(ls,{children:[s.jsx(ds,{children:"Cancel"}),s.jsx(cs,{onClick:J,className:"bg-blue-600 hover:bg-blue-700",children:"Yes, Change Password"})]})]})})]})]})]})}export{js as B,Ms as P,Is as T,Hs as a,Ps as b,ys as c,vs as d,p as e,Ls as g};
